@extends('layouts.userDashboard')
@section('content')
    <div class="p-5 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
        <div class="border-b-2 border-gray-200 dark:border-gray-700">
            <h1 class="pb-2 text-2xl font-semibold dark:text-white">Test List</h1>
        </div>
        <div class="mt-5">
            <div id="accordion-open" data-accordion="open">
                <h2 id="accordion-open-heading-1">
                    <button type="button"
                        class="flex items-center justify-between w-full p-5 font-medium text-left text-gray-500 border border-b-0 border-gray-200 rounded-t-xl focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"
                        data-accordion-target="#accordion-open-body-1" aria-expanded="true"
                        aria-controls="accordion-open-body-1">
                        <span>English Profiency Test (EPT)</span>
                        <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 5 5 1 1 5" />
                        </svg>
                    </button>
                </h2>
                <div id="accordion-open-body-1" class="hidden" aria-labelledby="accordion-open-heading-1">
                    <div class="p-5 border border-b-0 border-gray-200 dark:border-gray-700 dark:bg-gray-900">
                        <p class="text-gray-500 dark:text-gray-400">English Proficiency Test (EPT) atau lebih dikenal
                            dengan TOEFL merupakan tes yang terstandarisasi untuk mengukur kemampuan Bahasa Inggris dari
                            seseorang yang bahasa ibunya bukanlah Bahasa Inggris dan orang tersebut bertujuan untuk bekerja
                            atau kuliah di negara yang menggunakan Bahasa Inggris sebagai bahasa resmi yang digunakan. TOEFL
                            memiliki dua jenis tes, yaitu PBT (paper-based test) dan IBT (internet-based test). Untuk
                            rincian sesi test adalah sebagai berikut:
                        </p>
                        <section class="mt-2 text-gray-500 pl-9 dark:text-gray-400">
                            <li>Listening section : 50 pertanyaan</li>
                            <li>Writing section : 40 pertanyaan</li>
                            <li>Reading section : 50 pertanyaan</li>
                            <li>Skor atau nilai untuk ujian PBT berkisar antara 310 – 677 sedangkan untuk yang IBT berkisar
                                antara 217 – 677.</li>
                        </section>
                        <p class="mt-2 text-gray-500 dark:text-gray-400">Silakan klik tombol di bawah ini untuk dapat
                            mengakses pengetesan EPT secara daring.</p>
                        <div class="mt-5 mb-2">
                            <a href="/dashboard/test-guide"
                                class="mr-2 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600">Guide</a>
                            <a href="/dashboard/ept/waiting-area/schedule"
                                class="text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Start
                                EPT</a>
                            <button type="button" id="pay-ept-button"
                                class="text-white bg-green-700 hover:bg-green-800 focus:outline-none focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800">Buy
                                EPT</button>
                        </div>
                    </div>
                </div>
                <h2 id="accordion-collapse-heading-2">
                    <button type="button"
                        class="flex items-center justify-between w-full p-5 font-medium text-left text-gray-500 border border-gray-200 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"
                        data-accordion-target="#accordion-collapse-body-2" aria-expanded="false"
                        aria-controls="accordion-collapse-body-2">
                        <span>Test of English for International Communication (TOEIC)</span>
                        <svg data-accordion-icon class="w-3 h-3 rotate-360 shrink-0" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 5 5 1 1 5" />
                        </svg>
                    </button>
                </h2>
                <div id="accordion-collapse-body-2" class="hidden" aria-labelledby="accordion-collapse-heading-2">
                    <div class="p-5 border border-t-0 border-gray-200 dark:border-gray-700 dark:bg-gray-900">
                        <p class="text-gray-500 dark:text-gray-400">Test of English for International Communication
                            (TOEIC) merupakan tes bahasa Inggris untuk
                            komunikasi internasional. Tes ini dirancang khusus untuk mengukur kemampuan bahasa Inggris
                            sehari-hari orang-orang yang bekerja di lingkungan internasional.</p>
                        <p class="mt-2 text-gray-500 dark:text-gray-400">TOEIC terbagi menjadi dua jenis, yaitu TOEIC
                            Listening and Reading Test.</p>
                        <p class="mt-2 text-gray-500 dark:text-gray-400">TOEIC Listening and Reading Test terbagi menjadi
                            dua sesi. Sesi pertama, listening (mendengarkan) terdiri dari 100 soal pilihan ganda. Sesi
                            kedua, reading (membaca) terdiri dari 100 soal pilihan ganda. Untuk rincian sesi test adalah
                            sebagai berikut:</p>
                        <section class="mt-2 text-gray-500 pl-9 dark:text-gray-400 ">
                            <li>Photograph:20 pertanyaan</li>
                            <li>Question Responce: 30 pertanyaan</li>
                            <li>Conversation: 30 pertanyaan</li>
                            <li>Short Talk: 20 pertanyaan</li>
                            <li>Incomplete Sentences: 40 pertanyaan</li>
                            <li>Text Completion: 20 pertanyaan</li>
                            <li>Reading: 40 pertanyaan</li>
                            <li>Skor atau nilai untuk ujian TOEIC online berkisar antara 10 – 995.</li>
                        </section>
                        <p class="pl-6 mt-2 text-gray-500 dark:text-gray-400">Silakan klik tombol di bawah ini untuk dapat
                            mengakses pengetesan EPT secara daring.</p>
                        <div class="mt-5 mb-2">
                            <a href="/dashboard/test-guide"
                                class="mr-2 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600">Guide</a>
                            <a href="/dashboard/toeic/waiting-area/schedule"
                                class="text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Start
                                TOEIC</a>
                            <a href="/dashboard/payment/exam/toeic"
                                class="text-white bg-green-700 hover:bg-green-800 focus:outline-none focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800">Buy
                                TOEIC</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <p class="mt-5 text-red-600 dark:text-gray-400">KETIKA TES BERLANGSUNG PESERTA DILARANG UNTUK
            KELUAR/PERGI DARI "DISPLAY HALAMAN TES" HAL INI AKAN TERDETEKSI OLEH SISTEM DAN PESERTA AKAN
            DIKELUARKAN SECARA OTOMATIS, NILAI AKAN TERAKUMULASI SESUAI YANG SUDAH PESERTA KERJAKAN.</p>
        <div class="flex gap-5 max-md:block">
            <video class="mt-5 rounded-lg" width="450" controls>
                <source class="" src="" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <video class="mt-5 rounded-lg" width="450" controls>
                <source class="" src="" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
    </div>

    <form action="" method="POST" id="submit_form">
        @csrf
        <input type="hidden" name="json" id="json_callback">
    </form>

    @if (session()->has('success'))
        <div class="fixed bottom-0 z-10 w-full max-w-xs right-5">
            @include('notifications.success')
        </div>
    @elseif(session()->has('failed'))
        <div class="fixed bottom-0 z-10 w-full max-w-xs right-5">
            @include('notifications.failed')
        </div>
    @endif
@endsection
@push('script')
    <script type="text/javascript">
        var payButton = document.getElementById('pay-ept-button');

        payButton.addEventListener('click', function() {
            window.snap.pay('{{ $snap_token }}', {
                onSuccess: function(result) {
                    postEptPayment(result);
                },
                onPending: function(result) {
                    postEptPayment(result);
                },
                onError: function(result) {
                    postEptPayment(result);
                },
                onClose: function() {
                    console.log('you closed the popup without finishing the payment.');
                }
            })
        });

        function postEptPayment(result) {
            document.getElementById('json_callback').value = JSON.stringify(result);
            $('#submit_form').submit();
        }

        document.addEventListener("DOMContentLoaded", function() {
            var payEptButton = document.getElementById("pay-ept-button");

            if (payEptButton) {
                payEptButton.click();
            }
        });
    </script>
@endpush
